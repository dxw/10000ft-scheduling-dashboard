%div.screen
  %div.projects
    - if @schedule.projects.empty?
      %div
        = I18n.t('errors.projects.missing')
    - else
      - @schedule.projects.each do |project|
        - project_assignments = project.assignments(assignments: @schedule.todays_assignments)

        - if project_assignments.present?
          = render 'project', project: project, assignments: project_assignments, users: @schedule.users

    - if @schedule.holiday_assignments.present?
      = render 'project', project: Project.new(name: 'Holiday', project_state: 'leave'), assignments: @schedule.holiday_assignments, users: @schedule.users

    - if @schedule.sick_assignments.present?
      = render 'project', project: Project.new(name: 'Sick', project_state: 'leave'), assignments: @schedule.sick_assignments, users: @schedule.users

    - if @schedule.users_without_assignments.present?
      = render 'unassigned_users', users: @schedule.users_without_assignments
